<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="requestAnimationFrame-test" style="width: 1px;height: 18px;background: #666;">0%</div>
    <button onclick="run()">Run</button>
    <script>
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame
        var start = 0;
        var ele = document.getElementById('requestAnimationFrame-test');
        var progress = 0
        function step(timestamp) {
            progress += 1;
            ele.style.width = progress+'%';
            ele.innerHTML = progress+'%';
            if(progress < 100) {
                requestAnimationFrame(step)
            }
        }

        function run() {
            ele.style.width = "1px";
            progress = 0;
            requestAnimationFrame(step);
        }
    </script>
</body>
</html>